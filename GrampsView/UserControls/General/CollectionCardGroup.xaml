<Grid
    x:Class="GrampsView.UserControls.CollectionCardGroup"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Name="CollectionCardGroupRoot"
    Margin="0"
    Padding="0"
    BackgroundColor="Transparent"
    SizeChanged="CollectionCardGroup_SizeChanged">

    <Frame IsVisible="{Binding Visible, Mode=OneWay}" Style="{StaticResource CardGroupStyle}">
        <Grid x:Name="daGrid">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Label
                Grid.Row="0"
                Text="{Binding Title}"
                TextColor="{DynamicResource OnSurfaceColor}" />

            <FlexLayout
                x:Name="CardGroupTemplateFlexer"
                Grid.Row="1"
                BindableLayout.ItemTemplateSelector="{StaticResource CardTemplateSelector}"
                BindableLayout.ItemsSource="{Binding ., Mode=OneWay}"
                HeightRequest="{Binding daHeight, Source={x:Reference CollectionCardGroupRoot}, Mode=OneWay}"
                MeasureInvalidated="CardGroupTemplateFlexer_MeasureInvalidated"
                Style="{StaticResource FlexLayoutCards}" />
        </Grid>
    </Frame>
</Grid>